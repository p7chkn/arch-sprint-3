# Анализ и планирование
## Функциональность монолитного приложения
### Текущее состояние
1. Управление отоплением 
   - удаленное включение/выключение температуры
   - установка желаемой температуры
   - поддержка заданной температуры
2. Мониторинг температуры
   - получение данных о температуре
   - просмотр текущей температуры

### Недостатки этого решения:
- отсутствие пользователей, как отдельной сущности, как следствия этого - еще отсутствие авторизации и тд
- функционал завязанный на конкретные устройства связанные с отоплением, с невозможностью логически расширять возможности
- отсутствие обновлений в режиме "лайв"
- отсутствие возможности пользователю добавить устройство самостоятельно

## Архитектура монолитного приложения
### Текущее состояние
- Язык программирования: Java
- База данных: PostgreSQL
- Архитектура: Монолитная, все компоненты системы (обработка запросов, бизнес-логика, работа с данными) находятся в рамках одного приложения.
- Взаимодействие: Синхронное, запросы обрабатываются последовательно.
- Масштабируемость: Ограничена, так как монолит сложно масштабировать по частям.
- Развертывание: Требует остановки всего приложения.

### Недостатки
- при развертывании - система полностью недоступна 
- нагрузка на приложение неравномерная, но масштабируется оно вместе
- ограниченная пропускная способность и зависимость системы из-за синхронного взаимодействия (допустим нужно опросить 100 датчиков о текущей температуре, это хорошая I/O bound операция, которую выгодно выполнять асинхронно)
- сложность масштабирования кодовой базы, из-за того, что все компоненты расположены вместе, то при изменении может быть поломана часть системы, при увеличении кодовой базы - проблема будет усугубляться

## Домены и границы контекстов

### Домен: управление пользователями
- поддомен: управления данными
  - контекст: регистрация пользователя
  - контекст: изменение данных пользователя
- поддомен: получение доступов:
  - контекст: аутентификация
  - контекст: авторизация
### Домен: управление устройствами
- поддомен: подключение устройств
  - контекст: обнаружение устройств
  - контекст: настройка подключения
- поддомен: выполнение действий
  - контекст: передача команды на устройство
- поддомен: протоколы связи
  - контекст: перевод данных из формата устройства в общий формат приложения и обратно
### Домен: телеметрия
- поддомен: сбор данных
   - контекст: получение телеметрии
   - контекст: хранение данных
- поддомен: анализ данных
  - контекст: генерация отчетов
  - визуализация данных
### Домен: сценарии управления
- поддомен: управление сценариев
  - контекст: редактирование сценария
  - контекст: валидация сценариев 
- поддомен: выполнение сценариев:
  - контекст: планировщик выполнения команд
  - контекст: мониторинг выполнения

## System Context diagram

[Диаграмма](diagrams/1_1_c4_context_monolith.puml) контекста монолитного приложения